import Head from 'next/head'
import { Player } from '@lottiefiles/react-lottie-player';
import { useEffect, useRef, useState} from 'react';

import LoopingLogo from '../assets/logo_loop_animation.json';
import styles from '../styles/Home.module.css'

export default function Home() {
  const [logoAnimationPlayer, setLogoAnimationPlayer] = useState();

  useEffect(() => {
    if (!logoAnimationPlayer) return;

    function playAnimation() {
      if (!logoAnimationPlayer?.state?.instance) {
        setTimeout(playAnimation, 100);
      }

      try {
        logoAnimationPlayer.state.instance.play();
      } catch {
        setTimeout(playAnimation, 100);
      }
    }

    setTimeout(playAnimation, 300);    
  }, [logoAnimationPlayer]);

  return (
    <div className={styles.container}>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main className={styles.main}>
        <div>
        <Player
          className={styles.logoAnimation}
          ref={setLogoAnimationPlayer}
          controls={true}
          src="https://assets4.lottiefiles.com/private_files/lf30_zwsvsve1.json"
          speed={1.5}
        />
        </div>
      </main>
    </div>
  )
}